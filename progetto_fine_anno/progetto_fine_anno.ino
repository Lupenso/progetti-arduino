int pinLedRosso = 13;
int pinLedVerde = 12;
int pinBuzzer = 2;

String sceltaPorta;

bool haChiavePorta2 = true;
bool haChiavePorta3 = true;

void setup()
{
  Serial.begin(9600);
  Serial.println("Ti ritrovi in una stanza, ma non ti ricordi come ci sei arrivato.\nDavanti a te ci sono 3 porte,\ncon una con la scritta libert√†");
  drawDoor("0");
  Serial.println("Quale porta scegli per prima");

scegliPorta:
  sceltaPorta = leggiRisposta();
  if (sceltaPorta == "1\n") {
    primaPorta();
  } else if (sceltaPorta == "2\n") {
    if (haChiavePorta2) {
      secondaPorta();
    } else {
      Serial.println("Quella porta sembra essere bloccata");
      goto scegliPorta;
    }
  } else if (sceltaPorta == "3\n") {
    if (haChiavePorta3) {
      terzaPorta();
    } else {
      Serial.println("Quella porta sembra essere bloccata");
      goto scegliPorta;
    }
  }
}

void loop()
{

}

String leggiRisposta() {
  while (Serial.available() == 0) {

  }
  String x = Serial.readString();
  return x;
}

void primaPorta()
{
  Serial.println("Hai scelto la porta uno e riesci ad aprirla");
  drawDoor("1");
}

void secondaPorta()
{
  Serial.println("Grazie alla chiave che hai ritrovato apri anche la seconda porta");
  drawDoor("2");
}

void terzaPorta() 
{
  Serial.println("Grazie alla chiave che hai ritrovato apri anche la terza porta");
  drawDoor("3");
}





void drawDoor(String qualeAprire) {

  if (qualeAprire == "0") {
    Serial.println(R"(
     %%%%%%%%%%%%%%%%(            %%%%%%%%%%%%%%%%(        #%%%%%%%%%%%%%%(%(   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%&%%%%%%%%%%%%%%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%&%%%#%%%%#%%%%%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%&%%%%%%%%%%%%%%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%&%%%#%%%%#%%%%%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%&%%%%%%%%%%%%%%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&% .      (%&%%%%%%%%%%%%%%(   
     (&%%%%%%%%%%%%,&%            (&%%%%%%%%%%%%,&%        #(&%%%%%%%%%%%%.%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%&%%%%%%%%%%#%%%%   
     %&%%%%#%%%%%%%%&%            %&%%%%#%%%%%%%%&%        #%&%%%%%%%%%%%%%%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%&%%%%%#%%%%%%%%%   
     %&%%%%%%%%%#%%%&%            %&%%%%%%%%%#%%%&%        #%&%%%%%%%%%%%%%%%   
     %&%%%%%%%%%%%%%&%            %&%%%%%%%%%%%%%&%        #%#%%%%%%%%%%%%%%%   
     %&%%%%%%%%%%%%%&( .         .%&%%%%%%%%%%%%%&(.       ((&%%%%%%%%%%%%(%(   
  ..,%@*************(%,          ,%(*************/%,       %%#*************%%.  
      )");
  }


  if (qualeAprire == "1") {
    Serial.println(R"(
     %%%%%%%%%%%%%%%%%%        #%%%%%%%%%%%%%%%%%         %%%%%%%%%%%%%%#%(     
     %&%%%%%%        %%        %%%%%%%%%%%%%%%&%%         %&%%%%%%%%%%%%%%%     
     %&%%%%%%        %%        %%%%%%%%%%%%%%%%%%         %&%%%%%%%%#%%%%%%     
     &&%%%%%%        %%        %%%%%%%%%%%%%%%%%%         %&%%%%%%%%%%%%%%%     
     %&%%%%%%        %%        %%%%%%%%%%%%%%%%%%         %&%%%#%%%%%%%%%%%     
     &&%%%%%%        %%        %%%%%%%%%%%%%%%%%%         %&%%%%%%%%%%%%%%%     
     ####%%%%        %#        (%%%%%%%%%%%%%%&%(         %&%%%%%%%%%%%%%%(     
     &&%%%%%%        %%        %%%%%%%%%%%%%%%&%%         (&%%%%%%%%%%%%,%%     
     &&%%%%%%        %%        %%%%#%%%%%%%%%%&%%         %&%%%%%%%%%%%%%%%     
     %&%%%%%%        %%        %%%%%%%%%%%%%%%&%%         %&%%%%%%%%%%%%%%%     
     &&%%%%%%        %%        %%%%%%%%%#%%%%%&%%         %&%%%%%%%%%%%%%%%     
     &&%%%%%%        %%        %%%%%%%%%%%%%%%&%%         %&%%%%%%%%%%%%%%%     
     &&(%%%%%        %%        %%%%%%%%%%%%%%%&%%         %%%%%%%%%%%%%%%%%     
     %&%%%%%%        %%       .%%&%%%%%%%%%%%%&((..       %&%%%%%%%%%%%%#%( .   
     ,*/&%%%%                 .%&**************%%.       ,%#*************%%.    
     ....,*&%                                                                 
      )");
  }


  if (qualeAprire == "2") {
    Serial.println(R"(
           %                           %                  %%%%%%%%%%%%%%#%(     
     %%%%%%%%%%%%%%(             %%%%%%%%%%%%%%(          %&%%%%%%%%%%%%%%%     
     %&%%%%%       %             &&%%%#%       %          %&%%%%%%%%#%%%%%%     
     %&%%%%%       %             &&%%%%%       %          %&%%%%%%%%%%%%%%%     
     %&%%%%%       %             &&%%%%%       %          %&%%%#%%%%%%%%%%%     
     %&%%%%%       %             &&%%%%%       %          %&%%%%%%%%%%%%%%%     
     %#%#%%%       %.            &#%%%%%       %          %&%%%%%%%%%%%%%%(     
     %&%%%%/       %             &&%%%%*       %          (&%%%%%%%%%%%%,%%     
     %&%%%%%       %             &&%%%%%       %          %&%%%%%%%%%%%%%%%     
     %&%%%%%       %             &&%%%%%       %          %&%%%%%%%%%%%%%%%     
     %&%%%%%       %             &&%%%%%       %          %&%%%%%%%%%%%%%%%     
     %&%%%%%       %             &&%%%%%       %          %&%%%%%%%%%%%%%%%     
     %#%%%%%       %             &%%%%%%       %          %%%%%%%%%%%%%%%%%     
   ..,*/&%%%..                 ..,*/&%%%..                %&%%%%%%%%%%%%#%( .   
      ....,%.                     ....,&.                ,%#*************%%.   
      )");
  }

  if (qualeAprire == "3") {
    Serial.println(R"(
                %                                                                    
     %%%%%%%%%%%%%%(                  %%                          %%/           
     %&%%%%%       %             %%%%%%%%%%%%%%%             #%%%%%%%%%%%%%%.   
     %&%%%%%       %             &&%%%%%       %             %&%%%%%/      %    
     %&%%%%%       %             &&%%%%%       %             %&%%%%%/      %.   
     %&%%%%%       %             &&%%%%%       %             %&%%%%%/      %.   
     %#%#%%%       %.            &&%%%%%       %             %&%%%%%/      %    
     %&%%%%/       %             &##%%%*       %             %#%%%%,(      %    
     %&%%%%%       %             &&%%%%*       %             %&%%%%*(      %.   
     %&%%%%%       %             &&%%%%#       %             %&%%%%#/      %.   
     %&%%%%%       %             &&%%%%%       %             %&%%%%%/      %.   
     %&%%%%%       %             &&%%%%%       %             %&%%%#%/      %.   
     %#%%%%%       %             &&(%%%%       %             %&(%%%%/      %.   
   ..,*/&%%%..                   &&%%%%%.      %             %&%%%%%(      %.   
      ....,%.                  ..,,*(&%%...                ..,,*(&%%(..         
                                      .,                          .,,         
      )");
  }
}
